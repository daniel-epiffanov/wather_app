(this.webpackJsonpweather_app=this.webpackJsonpweather_app||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(5),c=a.n(r),s=(a(16),a(1)),i=a.n(s),o=a(2),u=a(6),m=a(7),d=a(9),f=a(8),h=a(10);a(4);var p=function(e){var t=null;return e.country&&(t=e.country.toLowerCase()),l.a.createElement("div",{className:"mainInfo"},l.a.createElement("h2",null,e.city,", ",e.country),l.a.createElement("img",{src:"./flags/".concat(t,".png"),alt:"flag"}),l.a.createElement("div",{className:"temp"},l.a.createElement("div",null,l.a.createElement("h1",null,e.main_temp,"\xb0")),l.a.createElement("div",null,l.a.createElement("i",{className:"wi ".concat(e.weatherIcon)}))),l.a.createElement("div",{className:"additional"},l.a.createElement("h3",{className:"feels_like"},"\u041e\u0449\u0443\u0449\u0430\u0435\u0442\u0441\u044f ",e.feels_like,"\xb0"),l.a.createElement("h3",{className:"maxMin"},"\u041c\u0438\u043d ",e.min,"\xb0 \u041c\u0430\u043a\u0441 ",e.max,"\xb0"),l.a.createElement("h3",{className:"description"},e.description)))};var y=function(e){var t,a,n,r,c,s,i,o,u,m,d,f,h,p,y,g,w,b,E=null,A=function(l,m,d,f){var h=[];m&&(h=m.split(",")),h.push(l);for(var p=[],y=0;y<h.length;y++){var g=h[y];(!0===g.startsWith(e.inputValue)||g.includes(e.inputValue))&&p.push(g)}console.log("country_code >>>",d),0===f?(t=p[0],s=s.toLowerCase()):1===f?(a=p[0],i=i.toLowerCase()):2===f?(n=p[0],o=o.toLowerCase()):3===f?(r=p[0],u=u.toLowerCase()):4===f&&(c=p[0],E=E.toLowerCase()),console.log("records0 >>>",t),console.log("records1 >>>",a),console.log("records2 >>>",n),console.log("records3 >>>",r),console.log("records4 >>>",c),console.log("country0 >>>",s),console.log("country1 >>>",i),console.log("country2 >>>",o),console.log("country3 >>>",u),console.log("country4 >>>",E)},I=null;switch(e.finalArr.length){case 1:m=e.finalArr[0].fields.name,d=e.finalArr[0].fields.alternate_names,s=e.finalArr[0].fields.country_code,A(m,d,s,0),a=null,n=null,r=null,c=null;break;case 2:m=e.finalArr[0].fields.name,d=e.finalArr[0].fields.alternate_names,s=e.finalArr[0].fields.country_code,A(m,d,s,0),f=e.finalArr[1].fields.name,h=e.finalArr[1].fields.alternate_names,i=e.finalArr[1].fields.country_code,A(f,h,i,1),n=null,r=null,c=null;break;case 3:m=e.finalArr[0].fields.name,d=e.finalArr[0].fields.alternate_names,s=e.finalArr[0].fields.country_code,A(m,d,s,0),f=e.finalArr[1].fields.name,h=e.finalArr[1].fields.alternate_names,i=e.finalArr[1].fields.country_code,A(f,h,i,1),p=e.finalArr[2].fields.name,y=e.finalArr[2].fields.alternate_names,o=e.finalArr[2].fields.country_code,A(p,y,o,2),r=null,c=null;break;case 4:m=e.finalArr[0].fields.name,d=e.finalArr[0].fields.alternate_names,s=e.finalArr[0].fields.country_code,A(m,d,s,0),f=e.finalArr[1].fields.name,h=e.finalArr[1].fields.alternate_names,i=e.finalArr[1].fields.country_code,A(f,h,i,1),p=e.finalArr[2].fields.name,y=e.finalArr[2].fields.alternate_names,o=e.finalArr[2].fields.country_code,A(p,y,o,2),g=e.finalArr[3].fields.name,w=e.finalArr[3].fields.alternate_names,u=e.finalArr[3].fields.country_code,A(g,w,u,3),c=null;break;case 5:m=e.finalArr[0].fields.name,d=e.finalArr[0].fields.alternate_names,s=e.finalArr[0].fields.country_code,A(m,d,s,0),f=e.finalArr[1].fields.name,h=e.finalArr[1].fields.alternate_names,i=e.finalArr[1].fields.country_code,A(f,h,i,1),p=e.finalArr[2].fields.name,y=e.finalArr[2].fields.alternate_names,o=e.finalArr[2].fields.country_code,A(p,y,o,2),g=e.finalArr[3].fields.name,w=e.finalArr[3].fields.alternate_names,u=e.finalArr[3].fields.country_code,A(g,w,u,3),b=e.finalArr[4].fields.name,I=e.finalArr[4].fields.alternate_names,E=e.finalArr[4].fields.country_code,A(b,I,E,4);break;default:t=null,a=null,n=null,r=null,c=null}return l.a.createElement("div",{className:"searchBox"},l.a.createElement("form",{onSubmit:e.loadWeather,id:".move"},l.a.createElement("button",{id:"inputBtn"},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"),l.a.createElement("input",{name:"searchBar",className:"searchBar",id:"searchBar",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0433\u043e\u0440\u043e\u0434",onInput:e.searchLive,autoComplete:"off",onBlur:function(){setTimeout((function(){document.getElementById("searchTable").style.display="none"}),300)},maxLength:"20",onFocus:function(){document.getElementById("searchBar").value=""}})),l.a.createElement("table",{id:"searchTable"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("button",{id:"btn0",onClick:function(t){return e.clearInput(m,f,p,g,b,t,s,i,o,u,E)}},t,l.a.createElement("img",{className:"searchBtn",src:"./flags/".concat(s,".png"),alt:"flag"})))),l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("button",{id:"btn1",onClick:function(t){return e.clearInput(m,f,p,g,b,t,s,i,o,u,E)}},a,l.a.createElement("img",{className:"searchBtn",src:"./flags/".concat(i,".png"),alt:"flag"})))),l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("button",{id:"btn2",onClick:function(t){return e.clearInput(m,f,p,g,b,t,s,i,o,u,E)}},n,l.a.createElement("img",{className:"searchBtn",src:"./flags/".concat(o,".png"),alt:"flag"})))),l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("button",{id:"btn3",onClick:function(t){return e.clearInput(m,f,p,g,b,t,s,i,o,u,E)}},r,l.a.createElement("img",{className:"searchBtn",src:"./flags/".concat(u,".png"),alt:"flag"})))),l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("button",{id:"btn4",onClick:function(t){return e.clearInput(m,f,p,g,b,t,s,i,o,u,E)}},c,l.a.createElement("img",{className:"searchBtn",src:"./flags/".concat(E,".png"),alt:"flag"})))))))},g="d60e9c0fd732e63411be26d3282fe316",w=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).state={city:null,country:null,main_temp:null,feels_like:null,description:null,weatherIcon:null,max:null,min:null,finalArr:[],inputValue:null},e.clearInput=function(e,t,a,n,l,r,c,s,i,o,u){var m=document.getElementById("searchBar");m.value="","btn0"===r.target.id?m.value=e+", "+c:"btn1"===r.target.id?m.value=t+", "+s:"btn2"===r.target.id?m.value=a+", "+i:"btn3"===r.target.id?m.value=n+", "+o:"btn4"===r.target.id&&(m.value=l+", "+u),document.getElementById("inputBtn").click(),console.log("Clear Input",e,t,a,n,l),console.log("event >>>",r.target.id),document.getElementById("searchTable").style.display="none"},e.searchLive=Object(o.a)(i.a.mark((function t(){var a,n,l,r,c,s,o,u,m;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.getElementById("searchBar").value,n=a.charAt(0).toUpperCase()+a.slice(1),l=document.getElementById("btn0"),r=document.getElementById("btn1"),c=document.getElementById("btn2"),s=document.getElementById("btn3"),o=document.getElementById("btn4"),t.next=9,fetch("https://data.opendatasoft.com/api/records/1.0/search/?dataset=geonames-all-cities-with-a-population-1000%40public&q=".concat(a,"&rows=5&facet=timezone&facet=country"));case 9:return u=t.sent,t.next=12,u.json();case 12:m=t.sent,e.setState({finalArr:m.records,inputValue:n}),""!==l.innerText||""!==r.innerText||""!==c.innerText||""!==s.innerText||""!==o.innerText?document.getElementById("searchTable").style.display="block":document.getElementById("searchTable").style.display="none",l.style.display="none",r.style.display="none",c.style.display="none",s.style.display="none",o.style.display="none",""!==l.innerText&&(l.style.display="block"),""!==r.innerText&&(r.style.display="block"),""!==c.innerText&&(c.style.display="block"),""!==s.innerText&&(s.style.display="block"),""!==o.innerText&&(o.style.display="block");case 25:case"end":return t.stop()}}),t)}))),e.getWeather=function(){var t=Object(o.a)(i.a.mark((function t(a){var n,l,r,c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!(n=a.target.searchBar.value)){t.next=19;break}return t.next=5,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(n,"&appid=").concat(g,"&lang=ru"));case 5:return l=t.sent,t.next=8,l.json();case 8:return r=t.sent,t.next=11,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(n,"&appid=").concat(g,"&lang=ru"));case 11:return c=t.sent,t.next=14,c.json();case 14:s=t.sent,console.log(s),200===r.cod?(document.querySelector(".mainInfo").style.display="block",e.setState({city:r.name,country:r.sys.country,main_temp:e.calculateCulsius(r.main.temp),feels_like:e.calculateCulsius(r.main.feels_like),description:r.weather[0].description,max:e.calculateCulsius(r.main.temp_max),min:e.calculateCulsius(r.main.temp_min)}),e.getWeatherIcon(e.weatherIcon,r.weather[0].id)):alert("error, \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441"),t.next=20;break;case 19:alert("error, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434");case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.calculateCulsius=function(e){return Math.floor(e-273.15)},e.getWeatherIcon=function(t,a){switch(!0){case a>=200&&a<=232:e.setState({weatherIcon:e.weatherIcon.Thunderstorm});break;case a>=300&&a<=321:e.setState({weatherIcon:e.weatherIcon.Drizzle});break;case a>=500&&a<=531:e.setState({weatherIcon:e.weatherIcon.Rain});break;case a>=600&&a<=622:e.setState({weatherIcon:e.weatherIcon.Snow});break;case a>=701&&a<=781:e.setState({weatherIcon:e.weatherIcon.Atmosphere});break;case 800===a:e.setState({weatherIcon:e.weatherIcon.Clear});break;case a>=801&&a<=804:e.setState({weatherIcon:e.weatherIcon.Clouds})}},e.weatherIcon={Thunderstorm:"wi-thunderstorm",Drizzle:"wi-sleet",Rain:"wi-day-rain",Snow:"wi-snow",Atmosphere:"wi-fog",Clear:"wi-day-sunny",Clouds:"wi-day-fog"},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"app"},l.a.createElement(y,{loadWeather:this.getWeather,searchLive:this.searchLive,finalArr:this.state.finalArr,inputValue:this.state.inputValue,clearInput:this.clearInput}),l.a.createElement(p,{city:this.state.city,country:this.state.country,main_temp:this.state.main_temp,feels_like:this.state.feels_like,description:this.state.description,weatherIcon:this.state.weatherIcon,max:this.state.max,min:this.state.min}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.44352149.chunk.js.map