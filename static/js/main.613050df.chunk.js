(this.webpackJsonpweather_app=this.webpackJsonpweather_app||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(5),c=n.n(r),s=(n(16),n(17),n(18),n(19),n(1)),u=n.n(s),i=n(2),o=n(6),m=n(7),h=n(9),p=n(8),d=n(10);n(4);var y=function(e){var t=null;return e.country&&(t=e.country.toLowerCase()),l.a.createElement("div",{className:"mainInfo"},l.a.createElement("div",{id:"load"},l.a.createElement("hr",null),l.a.createElement("hr",null),l.a.createElement("hr",null),l.a.createElement("hr",null)),l.a.createElement("div",{id:"content"},l.a.createElement("h2",null,e.city,", ",e.country),l.a.createElement("img",{src:"./flags/".concat(t,".png"),alt:"flag"}),l.a.createElement("div",{className:"temp"},l.a.createElement("div",null,l.a.createElement("h1",null,e.main_temp,"\xb0")),l.a.createElement("div",null,l.a.createElement("i",{className:"wi ".concat(e.weatherIcon)}))),l.a.createElement("div",{className:"additional"},l.a.createElement("h3",{className:"feels_like"},"\u041e\u0449\u0443\u0449\u0430\u0435\u0442\u0441\u044f ",e.feels_like,"\xb0"),l.a.createElement("h3",{className:"maxMin"},"\u041c\u0438\u043d ",e.min,"\xb0 \u041c\u0430\u043a\u0441 ",e.max,"\xb0"),l.a.createElement("h3",{className:"description"},e.description))))};var f=function(e){var t={res:null,country:null,name:null},n={res:null,country:null,name:null},a={res:null,country:null,name:null},r={res:null,country:null,name:null},c={res:null,country:null,name:null},s=function(l,s,u,i){var o=u.toLowerCase(),m=[];s&&(m=s.split(",")),m.push(l);for(var h=[],p=0;p<m.length;p++){var d=m[p];(!0===d.startsWith(e.inputValue)||d.includes(e.inputValue))&&h.push(d)}0===i?t={res:h[0],country:o,name:l}:1===i?n={res:h[0],country:o,name:l}:2===i?a={res:h[0],country:o,name:l}:3===i?r={res:h[0],country:o,name:l}:4===i&&(c={res:h[0],country:o,name:l})},u=function(t){return{name:e.searchResults[t].fields.name,alternate_names:e.searchResults[t].fields.alternate_names,country:e.searchResults[t].fields.country_code}},i=function(){var e=u(0);s(e.name,e.alternate_names,e.country,0)},o=function(){var e=u(1);s(e.name,e.alternate_names,e.country,1)},m=function(){var e=u(2);s(e.name,e.alternate_names,e.country,2)},h=function(){var e=u(3);s(e.name,e.alternate_names,e.country,3)};switch(e.searchResults.length){case 1:i(),n=null,a=null,r=null,c=null;break;case 2:i(),o(),a=null,r=null,c=null;break;case 3:i(),o(),m(),r=null,c=null;break;case 4:i(),o(),m(),h(),c=null;break;case 5:i(),o(),m(),h(),function(){var e=u(4);s(e.name,e.alternate_names,e.country,4)}();break;default:t.res=null,n.res=null,a.res=null,r.res=null,c.res=null}return l.a.createElement("div",{className:"searchBox"},l.a.createElement("form",{onSubmit:e.loadWeather,id:"move"},l.a.createElement("button",{id:"inputBtn"},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"),l.a.createElement("input",{name:"searchBar",className:"searchBar",id:"searchBar",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0433\u043e\u0440\u043e\u0434",onInput:e.searchLive,autoComplete:"off",onBlur:function(){setTimeout((function(){document.getElementById("searchTable").style.display="none"}),300)},maxLength:"20",onFocus:function(){document.getElementById("searchBar").value=""}})),l.a.createElement("table",{id:"searchTable"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("button",{id:"btn0",onClick:function(){return e.clearInput(t.name,t.country)}},t.res,l.a.createElement("img",{className:"searchBtn",src:"./flags/".concat(t.country,".png"),alt:"flag"})))),l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("button",{id:"btn1",onClick:function(){return e.clearInput(n.name,n.country)}},n.res,l.a.createElement("img",{className:"searchBtn",src:"./flags/".concat(n.country,".png"),alt:"flag"})))),l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("button",{id:"btn2",onClick:function(){return e.clearInput(a.name,a.country)}},a.res,l.a.createElement("img",{className:"searchBtn",src:"./flags/".concat(a.country,".png"),alt:"flag"})))),l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("button",{id:"btn3",onClick:function(){return e.clearInput(r.name,r.country)}},r.res,l.a.createElement("img",{className:"searchBtn",src:"./flags/".concat(r.country,".png"),alt:"flag"})))),l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("button",{id:"btn4",onClick:function(){return e.clearInput(c.name,c.country)}},c.res,l.a.createElement("img",{className:"searchBtn",src:"./flags/".concat(c.country,".png"),alt:"flag"})))))))},b=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={city:null,country:null,main_temp:null,feels_like:null,description:null,weatherIcon:null,max:null,min:null,searchResults:[],inputValue:null},e.getElement=function(e){return document.getElementById(e)},e.requestSities=Object(i.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://data.opendatasoft.com/api/records/1.0/search/?dataset=geonames-all-cities-with-a-population-1000%40public&q=".concat(e.getElement("searchBar").value,"&rows=5&facet=timezone&facet=country"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)}))),e.clearInput=function(t,n){e.getElement("searchBar").value=t+", "+n,e.getWeather(null,"ATTEMPT 2yes"),e.getElement("searchTable").style.display="none"},e.searchLive=Object(i.a)(u.a.mark((function t(){var n,a,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getElement("searchBar").value.charAt(0).toUpperCase()+e.getElement("searchBar").value.slice(1),a={btn0:e.getElement("btn0"),btn1:e.getElement("btn1"),btn2:e.getElement("btn2"),btn3:e.getElement("btn3"),btn4:e.getElement("btn4")},t.next=4,e.requestSities();case 4:l=t.sent,e.setState({searchResults:l.records,inputValue:n}),""!==a.btn0.innerText||""!==a.btn1.innerText||""!==a.btn2.innerText||""!==a.btn3.innerText||""!==a.btn4.innerText?e.getElement("searchTable").style.display="block":e.getElement("searchTable").style.display="none",a.btn0.style.display="none",a.btn1.style.display="none",a.btn2.style.display="none",a.btn3.style.display="none",a.btn4.style.display="none",""!==a.btn0.innerText&&(a.btn0.style.display="block"),""!==a.btn1.innerText&&(a.btn1.style.display="block"),""!==a.btn2.innerText&&(a.btn2.style.display="block"),""!==a.btn3.innerText&&(a.btn3.style.display="block"),""!==a.btn4.innerText&&(a.btn4.style.display="block");case 17:case"end":return t.stop()}}),t)}))),e.getWeather=function(){var t=Object(i.a)(u.a.mark((function t(n){var a,l,r,c,s,o,m,h;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.querySelector("#content").style.display="none",document.querySelector(".mainInfo").style.display="block",document.querySelector("#load").style.display="block",n&&n.preventDefault(),e.getElement("searchTable").style.display="none",a=e.getElement("searchBar"),t.next=8,e.requestSities();case 8:if(l=t.sent,r=function(){var e=Object(i.a)(u.a.mark((function e(t,n){var a,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/weather?".concat(t,"=").concat(n,"&appid=").concat("d60e9c0fd732e63411be26d3282fe316","&lang=ru"));case 2:return a=e.sent,e.next=5,a.json();case 5:return l=e.sent,e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c=function(t,n,a,l,r,c,s){e.setState({city:t,country:n,main_temp:a,feels_like:l,description:r,max:c,min:s})},s=function(){document.querySelector("#load").style.display="none",document.querySelector("#content").style.display="block"},o=function(){document.querySelector("#content").style.display="none",document.querySelector(".mainInfo").style.display="none",document.querySelector("#load").style.display="none"},""===a.value||"error, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"===a.value){t.next=48;break}return t.next=16,r("q",a.value);case 16:if(m=t.sent,a.value=m.name,200!==m.cod){t.next=24;break}c(m.name,m.sys.country,e.calculateCulsius(m.main.temp),e.calculateCulsius(m.main.feels_like),m.weather[0].description,e.calculateCulsius(m.main.temp_max),e.calculateCulsius(m.main.temp_min)),e.getWeatherIcon(m.weather[0].id),s(),t.next=46;break;case 24:if(!(l.nhits>=1)){t.next=43;break}return a.value="\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430",t.next=28,r("id",l.records[0].fields.geoname_id);case 28:if(200!==(m=t.sent).cod){t.next=35;break}c(m.name,m.sys.country,e.calculateCulsius(m.main.temp),e.calculateCulsius(m.main.feels_like),m.weather[0].description,e.calculateCulsius(m.main.temp_max),e.calculateCulsius(m.main.temp_min)),a.value="".concat(m.name),s(),t.next=41;break;case 35:if(!(l.nhits>=1)){t.next=41;break}return a.value="\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430",t.next=39,r("q",l.records[0].fields.ascii_name);case 39:200===(h=t.sent).cod?(c(h.name,h.sys.country,e.calculateCulsius(h.main.temp),e.calculateCulsius(h.main.feels_like),h.weather[0].description,e.calculateCulsius(h.main.temp_max),e.calculateCulsius(h.main.temp_min)),a.value="".concat(h.name),s()):(a.value="\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u043e\u0434 ".concat(h.cod," \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0442\u0435 \u0437\u0430\u043d\u043e\u0432\u043e"),a.blur(),o());case 41:t.next=46;break;case 43:a.value="\u043e\u0448\u0438\u0431\u043a\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439 \u0433\u043e\u0440\u043e\u0434",a.blur(),o();case 46:t.next=50;break;case 48:a.value="\u043e\u0448\u0438\u0431\u043a\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",o();case 50:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.calculateCulsius=function(e){return Math.floor(e-273.15)},e.getWeatherIcon=function(t){switch(!0){case t>=200&&t<=232:e.setState({weatherIcon:e.weatherIcon.Thunderstorm});break;case t>=300&&t<=321:e.setState({weatherIcon:e.weatherIcon.Drizzle});break;case t>=500&&t<=531:e.setState({weatherIcon:e.weatherIcon.Rain});break;case t>=600&&t<=622:e.setState({weatherIcon:e.weatherIcon.Snow});break;case t>=701&&t<=781:e.setState({weatherIcon:e.weatherIcon.Atmosphere});break;case 800===t:e.setState({weatherIcon:e.weatherIcon.Clear});break;case t>=801&&t<=804:e.setState({weatherIcon:e.weatherIcon.Clouds})}},e.weatherIcon={Thunderstorm:"wi-thunderstorm",Drizzle:"wi-sleet",Rain:"wi-day-rain",Snow:"wi-snow",Atmosphere:"wi-fog",Clear:"wi-day-sunny",Clouds:"wi-day-fog"},e}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"app"},l.a.createElement(f,{loadWeather:this.getWeather,searchLive:this.searchLive,searchResults:this.state.searchResults,inputValue:this.state.inputValue,clearInput:this.clearInput}),l.a.createElement(y,{city:this.state.city,country:this.state.country,main_temp:this.state.main_temp,feels_like:this.state.feels_like,description:this.state.description,weatherIcon:this.state.weatherIcon,max:this.state.max,min:this.state.min}))}}]),t}(a.Component);c.a.render(l.a.createElement(b,null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.613050df.chunk.js.map